(this.webpackJsonpdapp=this.webpackJsonpdapp||[]).push([[0],{193:function(e){e.exports=JSON.parse('"0xf24F5C4a3506DD7f645f92A6a69Cf7dEf21811e6"')},349:function(e){e.exports=JSON.parse('{"a":"[{\\"constant\\":false,\\"inputs\\":[],\\"name\\":\\"pickWinner\\",\\"outputs\\":[],\\"payable\\":false,\\"stateMutability\\":\\"nonpayable\\",\\"type\\":\\"function\\"},{\\"constant\\":true,\\"inputs\\":[],\\"name\\":\\"getPlayers\\",\\"outputs\\":[{\\"name\\":\\"\\",\\"type\\":\\"address[]\\"}],\\"payable\\":false,\\"stateMutability\\":\\"view\\",\\"type\\":\\"function\\"},{\\"constant\\":true,\\"inputs\\":[],\\"name\\":\\"owner\\",\\"outputs\\":[{\\"name\\":\\"\\",\\"type\\":\\"address\\"}],\\"payable\\":false,\\"stateMutability\\":\\"view\\",\\"type\\":\\"function\\"},{\\"constant\\":false,\\"inputs\\":[],\\"name\\":\\"participate\\",\\"outputs\\":[],\\"payable\\":true,\\"stateMutability\\":\\"payable\\",\\"type\\":\\"function\\"},{\\"constant\\":false,\\"inputs\\":[{\\"name\\":\\"newOwner\\",\\"type\\":\\"address\\"}],\\"name\\":\\"transferOwnership\\",\\"outputs\\":[],\\"payable\\":false,\\"stateMutability\\":\\"nonpayable\\",\\"type\\":\\"function\\"},{\\"constant\\":true,\\"inputs\\":[{\\"name\\":\\"\\",\\"type\\":\\"uint256\\"}],\\"name\\":\\"players\\",\\"outputs\\":[{\\"name\\":\\"\\",\\"type\\":\\"address\\"}],\\"payable\\":false,\\"stateMutability\\":\\"view\\",\\"type\\":\\"function\\"}]"}')},354:function(e,t,a){e.exports=a(842)},359:function(e,t,a){},370:function(e,t){},379:function(e,t){},397:function(e,t){},399:function(e,t){},415:function(e,t){},417:function(e,t){},518:function(e,t){},519:function(e,t){},564:function(e,t){},566:function(e,t){},598:function(e,t){},600:function(e,t){},606:function(e,t){},688:function(e,t,a){},837:function(e,t,a){},842:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(77),c=a.n(s),i=(a(359),a(28)),o=a.n(i),l=a(350),u=a(136),p=a(5),m=a(6),d=a(80),f=a(12),h=a(13),b=a(347),v=a.n(b),g=a(860),y=a(859),w=(a(688),a(193)),E=a(349),k=a(194),O=a.n(k),x=(a(837),function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){var e=this.props.num,t=["chamber one","chamber two","chamber three","chamber four","chamber five","chamber six"],a=O.a.take(t,e),n=O.a.drop(t,e);return console.log(a,n),r.a.createElement("div",{id:"cylinder"},r.a.createElement("div",{className:"sculpt one"}),r.a.createElement("div",{className:"sculpt two"}),r.a.createElement("div",{className:"sculpt three"}),r.a.createElement("div",{className:"sculpt four"}),r.a.createElement("div",{className:"sculpt five"}),r.a.createElement("div",{className:"sculpt six"}),r.a.createElement("div",{className:"ring center"}),a.map((function(e,t){return r.a.createElement("div",{className:e},r.a.createElement("div",{className:"bullet"},r.a.createElement("div",{className:"ring"})))})),n.map((function(e,t){return r.a.createElement("div",{className:e})})))}}]),a}(n.Component)),N=new v.a(window.web3.currentProvider),j=new N.eth.Contract(JSON.parse(E.a),w),S=Object(g.a)(y.a)({background:"linear-gradient(45deg, #a0deff 30%, #546fff 90%)",border:0,borderRadius:3,boxShadow:"0 3px 5px 2px rgba(255, 105, 135, .3)",color:"white",height:30,width:"100%",padding:"0 30px"}),C=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={owner:"",players:[],balance:"0",amount:"0",message:"",loading:!1,isOwner:!1},n.onInputChange=n.onInputChange.bind(Object(d.a)(n)),n.onParticipate=n.participate.bind(Object(d.a)(n)),n.onPickWinner=n.pickWinner.bind(Object(d.a)(n)),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t,a,n,r,s,c,i,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([j.methods.owner().call(),j.methods.getPlayers().call(),N.eth.getBalance(j.options.address)]);case 2:return t=e.sent,a=Object(l.a)(t,3),n=a[0],r=a[1],s=a[2],e.next=9,N.eth.getAccounts();case 9:c=e.sent,i=c[0],u=n===i,console.log({owner:n,players:r,balance:s,account:i,isOwner:u}),this.setState({owner:n,players:r,balance:s,isOwner:u});case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onInputChange",value:function(e){this.setState({amount:e.target.value})}},{key:"participate",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.setState({message:"\u53c2\u4e0e\u62bd\u5956\u4e2d\uff0c\u8bf7\u7a0d\u540e...",loading:!0}),e.next=4,N.eth.getAccounts();case 4:return t=e.sent,e.next=7,j.methods.participate().send({from:t[0],value:N.utils.toWei(this.state.amount,"ether")});case 7:this.setState({message:"\u53c2\u4e0e\u6210\u529f\uff01",loading:!1}),setTimeout((function(){window.location.reload()}),1e3),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0),this.setState({message:e.t0.message||e.t0.toString(),loading:!1});case 15:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"pickWinner",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.setState({message:"\u5f00\u5956\u4e2d\uff0c\u8bf7\u7a0d\u540e...",loading:!0}),e.next=4,N.eth.getAccounts();case 4:return t=e.sent,e.next=7,j.methods.pickWinner().send({from:t[0]});case 7:this.setState({message:"\u5f00\u5956\u5b8c\u6bd5\uff01",loading:!1}),setTimeout((function(){window.location.reload()}),1e3),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0),this.setState({message:e.t0.message||e.t0.toString(),loading:!1});case 15:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.balance,a=e.players,n=e.amount,s=e.loading,c=e.message,i=e.owner,o=e.isOwner;return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"App-header"},r.a.createElement("h2",{className:"App-title"},"\u57fa\u4e8e\u667a\u80fd\u5408\u7ea6\u7684\u62bd\u5956")),r.a.createElement("div",{className:"App-body"},r.a.createElement(S,null,"\u5956\u91d1\u6c60\u91d1\u989d ETH ",N.utils.fromWei(t,"ether")),r.a.createElement("div",{className:"money"},"\u5408\u7ea6\u5730\u5740\uff1a",r.a.createElement("span",{id:"cash"},w)),r.a.createElement(x,{num:a.length}),r.a.createElement("p",null,"\u5171 ",a.length," \u4eba\u53c2\u4e0e\u62bd\u5956"),r.a.createElement("hr",null),r.a.createElement("h3",null,"\u60f3\u8bd5\u8bd5\u624b\u6c14?"),r.a.createElement("div",null,r.a.createElement("label",null,"\u8f93\u5165\u968f\u673a\u91d1\u989d",r.a.createElement("input",{type:"number",value:n,onChange:this.onInputChange})),r.a.createElement("button",{onClick:this.onParticipate,disabled:s},"\u53c2\u4e0e\u62bd\u5956")),r.a.createElement("hr",null),r.a.createElement("h3",null,"\u5f00\u5956\u65f6\u95f4\u5230?"),r.a.createElement("button",{onClick:this.onPickWinner,disabled:!o},"\u7acb\u5373\u5f00\u5956"),r.a.createElement("hr",null),r.a.createElement("p",null,"\u5408\u7ea6\u7ba1\u7406\u5458\uff1a",i),r.a.createElement("h3",{className:"message"},c)))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(C,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[354,1,2]]]);
//# sourceMappingURL=main.82bec0c4.chunk.js.map